


## Java内存区域

#### 运行时数据区域

1. 程序计数器（线程私有）

是一块比较小的内存区域，它的作用可以看作是当前线程执行的字节码的行号指示器，该区域是唯一一块在虚拟机规范中不会抛出OutOfMemoryError的区域。

2. Java虚拟机栈（线程私有）

存储的是Java中的局部变量部分，线程中方法的调用对应着虚拟机中栈帧入栈出栈的过程。如果线程请求栈的深度大于虚拟机设置的栈的深度，会抛出StackOverFlowError,无法再分配内存时，会抛出OutOfMemoryError.

3. 本地方法栈

和虚拟机栈类似，只不过一个是一个对应的是Java方法，一个对应的是Native方法。

4. Java堆

它是所有线程共享的一块内存区域，存放对象实例，它是GC的主要区域。
分带收集算法：新生代、老年代

5. 方法区

线程共享的内存，用于存放已被虚拟机加载的类的信息，常量，静态变量等。

6. 运行时常量池

7. 直接内存

使用Natvie函数直接分配的堆外内存。在设置-Xmx时需要考虑直接内存，否则在堆内存动态扩展是，会出现OutOfMemoryError.


#### 对象访问

主流访问对象的方式有两种：

1. 句柄方式
reference中存放的是句柄的地址，句柄中包含实例数据地址和类型数据地址。

2. 直接指针
refercence中存放的就是对象的地址，而对象中包含了类型数据的地址。


#### OutOfMemoryError







